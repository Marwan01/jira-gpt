"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFetchAPI = exports.getContextAri = exports.createRequestStargateAsApp = void 0;
const fetch_1 = require("../api/fetch");
const runtime_1 = require("../api/runtime");
const createRequestStargateAsApp = () => { var _a, _b; return (_b = (_a = global.api) === null || _a === void 0 ? void 0 : _a.asApp().__requestAtlassian) !== null && _b !== void 0 ? _b : (0, fetch_1.fetchProduct)({ provider: 'app', remote: 'stargate' }); };
exports.createRequestStargateAsApp = createRequestStargateAsApp;
const getContextAri = () => {
    var _a;
    const sandboxGetAppAri = (_a = global.api) === null || _a === void 0 ? void 0 : _a.__getAppAri;
    if (sandboxGetAppAri) {
        return sandboxGetAppAri();
    }
    else {
        const runtime = (0, runtime_1.getRuntime)();
        return runtime.contextAri;
    }
};
exports.getContextAri = getContextAri;
const getFetchAPI = () => {
    const { api: sandboxAPI } = global;
    if (sandboxAPI && Object.keys(sandboxAPI).length) {
        return (0, fetch_1.getSandboxRuntimeAPI)(sandboxAPI);
    }
    else {
        return (0, fetch_1.getNodeRuntimeAPI)();
    }
};
exports.getFetchAPI = getFetchAPI;
